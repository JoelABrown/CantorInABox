<Window x:Class="Mooseware.CantorInABox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Mooseware.CantorInABox"
        xmlns:vms="clr-namespace:Mooseware.CantorInABox.ViewModels"
        xmlns:c1gauge="http://schemas.componentone.com/wpf/C1Gauge"
        mc:Ignorable="d"
        Title="Cantor In A Box"
        Height="500"
        Width="1000"
        MinHeight="500"
        Closing="Window_Closing"
        Loaded="Window_Loaded"
        Icon="Resources\ChetIcon.ico">
    <!-- Set the design-time data context for auto-completion purposes 
         (The real data context for runtime binding is in the ctor. -->
    <Window.DataContext>
        <vms:PrimeViewModel />
    </Window.DataContext>
    <Window.Resources>
        <local:FontBoldConverter x:Key="BoldConverter" />
        <local:BackgroundNotNullColourConverter x:Key="NotNullConverter" />
        <local:BackgroundPlayingColourConverter x:Key="PlayingBackgroundConverter" />
        <local:ForegroundPlayingColourConverter x:Key="PlayingForegroundConverter" />
        <Style x:Key="NoChromeButton"
               TargetType="{x:Type Button}">
            <Setter Property="Background"
                    Value="Transparent" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="Foreground"
                    Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Center" />
            <Setter Property="VerticalContentAlignment"
                    Value="Center" />
            <Setter Property="Padding"
                    Value="1" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid x:Name="Chrome"
                              Background="{TemplateBinding Background}"
                              SnapsToDevicePixels="true">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              Margin="{TemplateBinding Padding}"
                                              RecognizesAccessKey="True"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled"
                                     Value="false">
                                <Setter Property="Foreground"
                                        Value="#ADADAD" />
                                <Setter Property="Opacity"
                                        TargetName="Chrome"
                                        Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <DataTemplate x:Key="LibraryTrackDataTemplate">
            <Border Background="DarkGray"
                    BorderBrush="Transparent"
                    BorderThickness="1"
                    Margin="0"
                    Padding="0 3 0 3">
                <Border Background="DarkBlue"
                        BorderBrush="Black"
                        BorderThickness="1"
                        CornerRadius="3"
                        Margin="0">
                    <DockPanel>
                        <DockPanel DockPanel.Dock="Left"
                                   HorizontalAlignment="Left">
                            <CheckBox IsChecked="{Binding Selected}"
                                      Margin="5 6 5 0" />
                            <Label Content="{Binding Title}"
                                   FontWeight="{Binding Selected, Converter={StaticResource BoldConverter}}" />
                        </DockPanel>
                        <DockPanel DockPanel.Dock="Right"
                                   HorizontalAlignment="Right">
                            <Label Content="["
                                   Padding="10 4 0 4" />
                            <Label Content="{Binding FormattedLength}"
                                   FontWeight="Normal" />
                            <Label Content="]"
                                   Padding="0 4 0 4" />
                            <Button Click="PreviewButton_Click"
                                    Style="{DynamicResource NoChromeButton}"
                                    Margin="20 0 10 0"
                                    Height="20">
                                <Image Source="Resources/preview.png" />
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Preview" /></TextBlock>
                                        <TextBlock><Run Text="Click to hear this track. Click again to stop the preview." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                            </Button>
                        </DockPanel>
                    </DockPanel>
                </Border>
            </Border>
        </DataTemplate>
        <DataTemplate x:Key="LibraryTrackDataTemplateDrag">
            <StackPanel Orientation="Vertical"
                        Margin="5 10 5 10"
                        Background="{StaticResource DragTipBackgroundBrush}">
                <TextBlock Text="{Binding Title}"
                           Foreground="{StaticResource DarkForgroundBrush}"
                           FontWeight="Bold"
                           Margin="4 2 4 2" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="PlaylistTrackDataTemplate">
            <Border Background="Gainsboro"
                    BorderBrush="Transparent"
                    BorderThickness="1"
                    Margin="0"
                    Padding="0 3 0 3">
                <Border Background="Honeydew"
                        BorderBrush="Black"
                        BorderThickness="1"
                        CornerRadius="3"
                        Margin="0">
                    <DockPanel>
                        <DockPanel DockPanel.Dock="Left"
                                   HorizontalAlignment="Left">
                            <CheckBox IsChecked="{Binding Selected}"
                                      Margin="5 6 5 0" />
                            <Label Content="{Binding Title}"
                                   FontWeight="{Binding Selected, Converter={StaticResource BoldConverter}}" />
                        </DockPanel>
                        <DockPanel DockPanel.Dock="Right"
                                   HorizontalAlignment="Right">
                            <Label Content="["
                                   Padding="10 4 0 4" />
                            <Label Content="{Binding FormattedLength}"
                                   FontWeight="Normal" />
                            <Label Content="]"
                                   Padding="0 4 0 4" />
                            <Button Click="PreviewButton_Click"
                                    Style="{DynamicResource NoChromeButton}"
                                    Margin="20 0 10 0"
                                    Height="20">
                                <Image Source="Resources/preview.png" />
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Preview" /></TextBlock>
                                        <TextBlock><Run Text="Click to hear this track. Click again to stop the preview." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                            </Button>
                        </DockPanel>
                    </DockPanel>
                </Border>
            </Border>
        </DataTemplate>
        <DataTemplate x:Key="PlaylistTrackDataTemplateDrag">
            <StackPanel Orientation="Vertical"
                        Margin="5 10 5 10"
                        Background="{StaticResource DragTipBackgroundBrush}">
                <TextBlock Text="{Binding Title}"
                           FontWeight="Bold" />
            </StackPanel>
        </DataTemplate>
        <ItemsPanelTemplate x:Key="panelTemplate">
            <StackPanel Orientation="Vertical" />
        </ItemsPanelTemplate>
    </Window.Resources>
    <Grid Background="{StaticResource DarkBackgroundBrush}">
        <TextBlock x:Name="LowerRightCornerStatusMessages"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Bottom"
                   Foreground="{StaticResource StatusMessageForegroundBrush}"
                   Margin="0 0 14 10"
                   Text="[TMP: Status messages go here.]" />
        <TabControl  Margin="10,10,10,10"
                     TabStripPlacement="Bottom"
                     UseLayoutRounding="True"
                     ScrollViewer.CanContentScroll="True"
                     SelectionChanged="TabControl_SelectionChanged">
            <TabItem x:Name="LibrariesTabItem"
                     Header="Libraries"
                     IsEnabled="{Binding CanLibraryTab, Mode=OneWay}">
                <Grid x:Name="LibraryTabContainerGrid">
                    <Grid x:Name="LibraryTabLibaryPropertiesGrid"
                          Grid.Row="0"
                          Grid.Column="0"
                          Panel.ZIndex="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <StackPanel x:Name="LibraryCommandButtonsPanel"
                                    Orientation="Vertical"
                                    Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="0"
                                    Margin="4,0,8,0">
                            <Button x:Name="OpenLibraryButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="OpenLibraryButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Open Library File" /></TextBlock>
                                        <TextBlock><Run Text="Open an existing library track list (CIBLIB file)." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Open-Playlist-Button-Icon.png" />
                            </Button>
                            <Button x:Name="NewLibraryButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="NewLibraryButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="New Library File" /></TextBlock>
                                        <TextBlock><Run Text="Create a new empty library track list (CIBLIB file)." /></TextBlock>
                                        <TextBlock><Run Text="The new file will be saved immediately." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/New-Playlist-Button-Icon.png" />
                            </Button>
                            <Button x:Name="SaveLibraryButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding CanSaveLibrary, Mode=OneWay}"
                                    Command="{Binding SaveCurrentLibraryCommand}">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Save Library File" /></TextBlock>
                                        <TextBlock><Run Text="Save the library to its current file name." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Save-Playlist-Button-Icon.png">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Style.Triggers>
                                                <Trigger Property="IsEnabled"
                                                         Value="False">
                                                    <Setter Property="Opacity"
                                                            Value="0.5" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Button>
                            <Button x:Name="SaveAsLibraryButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="SaveAsLibraryButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Save Library File As..." /></TextBlock>
                                        <TextBlock><Run Text="Save the library track list to a new Library File (.CIBLIB)." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Save-Playlist-As-Button-Icon.png" />
                            </Button>
                            <Rectangle HorizontalAlignment="Stretch"
                                       Margin="4,4,4,0"
                                       Height="1"
                                       Stroke="{StaticResource TextBoxBackgroundBrush}" />
                            <Button x:Name="AddLibraryTrackButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding HasCurrentLibrary, Mode=OneWay}"
                                    Click="AddLibraryTrackButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Add Track" /></TextBlock>
                                        <TextBlock><Run Text="Add a new track to the open Library file." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Add-Audio-Button-Icon.png" />
                            </Button>
                            <Button x:Name="RemoveLibraryTrackButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding HasSelectedLibraryEntries, Mode=OneWay}"
                                    Click="RemoveLibraryTrackButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Remove Selected Tracks" /></TextBlock>
                                        <TextBlock><Run Text="Remove selected tracks from the Library file." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Remove-Audio-Button-Icon.png">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Style.Triggers>
                                                <Trigger Property="IsEnabled"
                                                         Value="False">
                                                    <Setter Property="Opacity"
                                                            Value="0.5" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Button>
                            <Button x:Name="IncludeTracksButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding HasSelectedLibraryEntries, Mode=OneWay}"
                                    Click="IncludeTracksButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Include Selected Tracks" /></TextBlock>
                                        <TextBlock><Run Text="Include selected tracks into the current playlist." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Include-Audio-Button-Icon.png">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Style.Triggers>
                                                <Trigger Property="IsEnabled"
                                                         Value="False">
                                                    <Setter Property="Opacity"
                                                            Value="0.5" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Button>
                        </StackPanel>
                        <Grid x:Name="LibrariesTabLibListGrid"
                              Grid.Column="1"
                              Grid.Row="0"
                              Margin="0,8,8,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Label Grid.Column="0"
                                   Grid.Row="0"
                                   Content="Library"
                                   Margin="0 -2 0 0" />
                            <ComboBox x:Name="KnownLibraryListComboBox"
                                      Grid.Row="0"
                                      Grid.Column="1"
                                      Margin="0,0,0,8"
                                      Height="24"
                                      SelectionChanged="KnownLibraryListComboBox_SelectionChanged"
                                      HorizontalAlignment="Stretch" />
                            <Label Grid.Column="0"
                                   Grid.Row="1"
                                   Margin="0,-3,4,0"
                                   Content="Title" />
                            <TextBox x:Name="CurrentLibraryTitleTextBox"
                                     Grid.Row="1"
                                     Grid.Column="1"
                                     Height="22"
                                     Margin="0,0,0,8"
                                     MouseDoubleClick="SelectTextboxContents"
                                     GotKeyboardFocus="SelectTextboxContents"
                                     PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                     IsEnabled="{Binding HasCurrentLibrary, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     IsReadOnly="{Binding HasNoCurrentLibrary, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     Text="{Binding CurrentLibrary.Title, Mode=TwoWay}" />
                            <Label Grid.Column="0"
                                   Grid.Row="2"
                                   Margin="0,-3,4,0"
                                   Content="Description" />
                            <TextBox x:Name="CurrentLibraryDescriptionTextBox"
                                     Grid.Column="1"
                                     Grid.Row="2"
                                     Height="22"
                                     Margin="0,0,0,8"
                                     MouseDoubleClick="SelectTextboxContents"
                                     GotKeyboardFocus="SelectTextboxContents"
                                     PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                     IsEnabled="{Binding HasCurrentLibrary, Mode=OneWay}"
                                     IsReadOnly="{Binding HasNoCurrentLibrary, Mode=OneWay}"
                                     Text="{Binding CurrentLibrary.Description, Mode=TwoWay}" />
                            <GroupBox Header="Entries"
                                      Grid.Row="3"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="2"
                                      VerticalAlignment="Stretch"
                                      Margin="0,0,0,4">
                                <DockPanel x:Name="ScrollingLibraryEntryPanel"
                                           Margin="0"
                                           Background="{StaticResource DarkBackgroundBrush}">
                                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                                        <ItemsControl x:Name="LibraryEntries"
                                                      Background="{StaticResource DarkBackgroundBrush}"
                                                      Margin="8"
                                                      ItemsSource="{Binding CurrentLibrary.Entries, Mode=TwoWay}"
                                                      local:DragDropHelper.IsDragSource="true"
                                                      local:DragDropHelper.IsDropTarget="true"
                                                      local:DragDropHelper.DragDropTemplate="{StaticResource LibraryTrackDataTemplateDrag}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Vertical" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource DarkBackgroundBrush}"
                                                            BorderBrush="Transparent"
                                                            BorderThickness="1"
                                                            Margin="0"
                                                            Padding="0 3 0 3">
                                                        <Border Background="{Binding Previewing, Converter={StaticResource PlayingBackgroundConverter}}"
                                                                BorderBrush="{Binding Previewing, Converter={StaticResource PlayingForegroundConverter}}"
                                                                BorderThickness="1"
                                                                CornerRadius="3"
                                                                Margin="0">
                                                            <DockPanel>
                                                                <DockPanel DockPanel.Dock="Left"
                                                                           HorizontalAlignment="Left">
                                                                    <CheckBox x:Name="LibraryEntrySelectionCheckBox"
                                                                              IsChecked="{Binding Selected}"
                                                                              Margin="5 6 5 0"
                                                                              Click="LibraryEntrySelectionCheckBox_Click" />
                                                                    <Label Content="{Binding Title}"
                                                                           FontWeight="{Binding Selected, Converter={StaticResource BoldConverter}}"
                                                                           Foreground="{StaticResource BrightForegroundBrush}"
                                                                           Margin="0 0 0 0" />
                                                                    <Label Content="{Binding PunctuatedRendition}"
                                                                           Foreground="{StaticResource BrightForegroundBrush}" />
                                                                </DockPanel>
                                                                <DockPanel DockPanel.Dock="Right"
                                                                           HorizontalAlignment="Right">
                                                                    <Label Content="["
                                                                           Padding="10 4 0 4" />
                                                                    <Label Content="{Binding FormattedLength}"
                                                                           FontWeight="Normal" />
                                                                    <Label Content="]"
                                                                           Padding="0 4 0 4" />
                                                                    <Button Click="EditLibraryEntryButton_Click"
                                                                            Style="{DynamicResource NoChromeButton}"
                                                                            Margin="16 0 10 0"
                                                                            Height="20">
                                                                        <Image Source="Resources/edit_40x40.png" />
                                                                        <Button.ToolTip>
                                                                            <StackPanel Orientation="Vertical">
                                                                                <TextBlock FontWeight="Bold"><Run Text="Edit" /></TextBlock>
                                                                                <TextBlock><Run Text="Edit the title, rendition and page references for this entry." /></TextBlock>
                                                                            </StackPanel>
                                                                        </Button.ToolTip>
                                                                    </Button>
                                                                    <Button x:Name="LibraryEntryPreviewButton"
                                                                            Click="PreviewButton_Click"
                                                                            Style="{DynamicResource NoChromeButton}"
                                                                            Margin="0 0 10 0"
                                                                            Height="20">
                                                                        <Image Source="Resources/preview.png" />
                                                                        <Button.ToolTip>
                                                                            <StackPanel Orientation="Vertical">
                                                                                <TextBlock FontWeight="Bold"><Run Text="Preview" /></TextBlock>
                                                                                <TextBlock><Run Text="Click to hear this track. Click again to stop the preview." /></TextBlock>
                                                                            </StackPanel>
                                                                        </Button.ToolTip>
                                                                    </Button>
                                                                </DockPanel>
                                                            </DockPanel>
                                                        </Border>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </DockPanel>
                            </GroupBox>
                        </Grid>
                    </Grid>
                    <Grid x:Name="LibraryEntryPropertiesContainerGrid"
                          Panel.ZIndex="2"
                          Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Canvas x:Name="LibraryEntryOverlayPanel"
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Background="{StaticResource SemiTransparentBackgroundBrush}" />
                        <GroupBox Header="Library Entry Details"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Height="Auto"
                                  Margin="0,0,8,4"
                                  Panel.ZIndex="4">
                            <Grid x:Name="LibraryEntryPropsGrid"
                                  Margin="4,8,4,4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Label Grid.Row="0"
                                       Grid.Column="0"
                                       Content="File"
                                       Margin="0,-3,4,0" />
                                <TextBox Grid.Row="0"
                                         Grid.Column="1"
                                         HorizontalAlignment="Stretch"
                                         Margin="0,0,0,8"
                                         Height="22"
                                         Width="600"
                                         IsReadOnly="True"
                                         IsEnabled="False"
                                         Text="{Binding CurrentLibraryEntry.Filespec, Mode=OneWay}" />
                                <Label Grid.Row="1"
                                       Grid.Column="0"
                                       Content="Title"
                                       Margin="0,-3,4,0" />
                                <TextBox Grid.Row="1"
                                         Grid.Column="1"
                                         HorizontalAlignment="Stretch"
                                         Margin="0,0,0,8"
                                         Height="22"
                                         IsEnabled="{Binding HasCurrentLibraryEntry, Mode=OneWay}"
                                         IsReadOnly="{Binding HasNoCurrentLibraryEntry, Mode=OneWay}"
                                         MouseDoubleClick="SelectTextboxContents"
                                         GotKeyboardFocus="SelectTextboxContents"
                                         PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                         Text="{Binding CurrentLibraryEntry.Title, Mode=TwoWay}" />
                                <Label Grid.Row="2"
                                       Grid.Column="0"
                                       Content="Rendition"
                                       Margin="0,-3,4,0" />
                                <TextBox Grid.Row="2"
                                         Grid.Column="1"
                                         HorizontalAlignment="Stretch"
                                         Margin="0,0,0,8"
                                         Height="22"
                                         IsEnabled="{Binding HasCurrentLibraryEntry, Mode=OneWay}"
                                         IsReadOnly="{Binding HasNoCurrentLibraryEntry, Mode=OneWay}"
                                         Text="{Binding CurrentLibraryEntry.Rendition, Mode=TwoWay}" />
                                <Label Grid.Row="3"
                                       Grid.Column="0"
                                       Content="Length"
                                       Margin="0,-3,4,0" />
                                <StackPanel Orientation="Horizontal"
                                            Grid.Row="3"
                                            Grid.Column="1">
                                    <TextBox HorizontalAlignment="Left"
                                             Height="22"
                                             Margin="0,0,0,8"
                                             Width="45"
                                             IsReadOnly="True"
                                             IsEnabled="False"
                                             Text="{Binding CurrentLibraryEntry.FormattedLength, Mode=OneWay}" />
                                    <Label Content="(at nominal tempo)"
                                           Margin="0 -3 0 0" />
                                </StackPanel>
                                <Label Grid.Row="4"
                                       Grid.Column="0"
                                       Content="Pages"
                                       Margin="0,-3,4,0" />
                                <StackPanel Orientation="Horizontal"
                                            Grid.Row="4"
                                            Grid.Column="1">
                                    <Label x:Name="PagesLabel1"
                                           Margin="0 -3 0 0"
                                           Content="{Binding PagesLabel1}" />
                                    <TextBox x:Name="Pages1TextBox"
                                             Margin="0,0,0,8"
                                             Height="22"
                                             Width="50"
                                             MouseDoubleClick="SelectTextboxContents"
                                             GotKeyboardFocus="SelectTextboxContents"
                                             PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                             Text="{Binding CurrentLibraryEntry.PagesBookA, Mode=TwoWay}" />
                                    <Label x:Name="PagesLabel2"
                                           Margin="8 -3 0 0"
                                           Content="{Binding PagesLabel2}" />
                                    <TextBox x:Name="Pages2TextBox"
                                             Margin="0,0,0,8"
                                             Height="22"
                                             Width="50"
                                             MouseDoubleClick="SelectTextboxContents"
                                             GotKeyboardFocus="SelectTextboxContents"
                                             PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                             Text="{Binding CurrentLibraryEntry.PagesBookB, Mode=TwoWay}" />
                                    <Label x:Name="PagesLabel3"
                                           Margin="8 -3 0 0"
                                           Content="{Binding PagesLabel3}" />
                                    <TextBox x:Name="Pages3TextBox"
                                             Margin="0,0,0,8"
                                             Height="22"
                                             Width="50"
                                             MouseDoubleClick="SelectTextboxContents"
                                             GotKeyboardFocus="SelectTextboxContents"
                                             PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                             Text="{Binding CurrentLibraryEntry.PagesBookC, Mode=TwoWay}" />
                                </StackPanel>
                                <DockPanel DockPanel.Dock="Right"
                                           HorizontalAlignment="Right"
                                           Grid.Column="1"
                                           Grid.Row="4">
                                    <Button x:Name="LibraryEntryDetailsCloseButton"
                                            HorizontalAlignment="Right"
                                            Width="50"
                                            Height="28"
                                            Margin="0 -6 0 0"
                                            Content="Close"
                                            Click="LibraryEntryDetailsCloseButton_Click" />
                                </DockPanel>
                            </Grid>
                        </GroupBox>
                    </Grid>
                    <Grid x:Name="LibraryEntryConfirmationContainerGrid"
                          Panel.ZIndex="2"
                          Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Canvas x:Name="LibraryEntryConfirmationOverlayPanel"
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Background="{StaticResource SemiTransparentBackgroundBrush}" />
                        <GroupBox Header="Confirm Permanent Action"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Height="Auto"
                                  Margin="0,0,8,4"
                                  Panel.ZIndex="4">
                            <Grid x:Name="LibraryEntryConfirmationLayoutGrid"
                                  Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Image Source="/Resources/Warning-80x80.png"
                                       Grid.Row="0"
                                       Grid.Column="0"
                                       Height="50"
                                       Width="50"
                                       Margin="0 0 20 0"
                                       VerticalAlignment="Top"/>
                                <StackPanel Orientation="Vertical"
                                            Grid.Column="1"
                                            Grid.Row="0">
                                    <TextBlock FontWeight="Bold"
                                               FontSize="15"
                                               Text="Confirm Delete" />
                                    <TextBlock x:Name="LibraryEntryConfirmDeleteMessageTextBlock"
                                               Text="{Binding LibraryEntryConfirmDeleteMessage, Mode=OneWay}" />
                                    <TextBlock x:Name="LibraryEntryConfirmDeleteDetailsTextBlock"
                                               Text="{Binding LibraryEntryConfirmDeleteList, Mode=OneWay}" />
                                    <DockPanel DockPanel.Dock="Right"
                                               HorizontalAlignment="Right"
                                               Margin="0 10 0 0">
                                        <StackPanel Orientation="Horizontal">
                                            <Button x:Name="CancelLibraryEntryDeleteButton"
                                                    Content="Cancel"
                                                    Height="30"
                                                    Width="60"
                                                    Click="CancelLibraryEntryDeleteButton_Click" />
                                            <Button x:Name="ConfirmLibraryEntryDeleteButton"
                                                    Content="Delete"
                                                    Height="30"
                                                    Width="60"
                                                    Margin="10 0 0 0"
                                                    Click="ConfirmLibraryEntryDeleteButton_Click" />
                                        </StackPanel>
                                    </DockPanel>
                                </StackPanel>
                            </Grid>
                        </GroupBox>
                    </Grid>
                </Grid>
            </TabItem>

            <TabItem x:Name="PlaylistTabItem"
                     Header="Playlist"
                     IsEnabled="{Binding CanPlaylistTab,Mode=OneWay}">
                <Grid x:Name="PlaylistTabContainerGrid">
                    <Grid x:Name="PlaylistTabLibaryPropertiesGrid"
                          Grid.Row="0"
                          Grid.Column="0"
                          Panel.ZIndex="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <StackPanel x:Name="PlaylistCommandButtonsPanel"
                                    Orientation="Vertical"
                                    Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="0"
                                    Margin="4,0,8,0">
                            <Button x:Name="OpenPlaylistButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="OpenPlaylistButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Open Playlist File" /></TextBlock>
                                        <TextBlock><Run Text="Open an existing playlist (CIBPLF file)." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Open-Playlist-Button-Icon.png" />
                            </Button>
                            <Button x:Name="NewPlaylistButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="NewPlaylistButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="New Playlist File" /></TextBlock>
                                        <TextBlock><Run Text="Create a new empty playlist (CIBPLF file)." /></TextBlock>
                                        <TextBlock><Run Text="The new file will be saved immediately." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/New-Playlist-Button-Icon.png" />
                            </Button>
                            <Button x:Name="SavePlaylistButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding CanSaveLibrary, Mode=OneWay}"
                                    Command="{Binding SaveCurrentPlaylistCommand}">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Save Playlist File" /></TextBlock>
                                        <TextBlock><Run Text="Save the playlist with its current file name." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Save-Playlist-Button-Icon.png">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Style.Triggers>
                                                <Trigger Property="IsEnabled"
                                                         Value="False">
                                                    <Setter Property="Opacity"
                                                            Value="0.5" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Button>
                            <Button x:Name="SaveAsPlaylistButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    Click="SaveAsPlaylistButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Save Playlist File As..." /></TextBlock>
                                        <TextBlock><Run Text="Save the playlist to a new Playlist File (.CIBPLF)." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Save-Playlist-As-Button-Icon.png" />
                            </Button>
                            <Rectangle HorizontalAlignment="Stretch"
                                       Margin="4,4,4,0"
                                       Height="1"
                                       Stroke="{StaticResource TextBoxBackgroundBrush}" />
                            <Button x:Name="RemovePlaylistTrackButton"
                                    Height="36"
                                    Width="36"
                                    Margin="0,8,0,4"
                                    IsEnabled="{Binding HasSelectedPlaylistTracks, Mode=OneWay}"
                                    Click="RemovePlaylistTrackButton_Click">
                                <Button.ToolTip>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontWeight="Bold"><Run Text="Remove Selected Tracks" /></TextBlock>
                                        <TextBlock><Run Text="Remove selected tracks from the playlist." /></TextBlock>
                                    </StackPanel>
                                </Button.ToolTip>
                                <Image Source="/Resources/Remove-Audio-Button-Icon.png">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Style.Triggers>
                                                <Trigger Property="IsEnabled"
                                                         Value="False">
                                                    <Setter Property="Opacity"
                                                            Value="0.5" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Button>
                        </StackPanel>
                        <Grid x:Name="PlaylistTabPropertiesGrid"
                              Grid.Column="1"
                              Grid.Row="0"
                              Margin="0,8,8,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Label Grid.Column="0"
                                   Grid.Row="0"
                                   Content="Playlist"
                                   Margin="0 -2 8 0" />
                            <TextBlock x:Name="CurrentPlaylistFilespecTextBlock"
                                       Grid.Row="0"
                                       Grid.Column="1"
                                       Margin="0 0 0 0"
                                       Height="30"
                                       Text="{Binding CurrentPlaylist.Filespec, Mode=OneWay}" />
                            <Label Grid.Column="0"
                                   Grid.Row="1"
                                   Margin="0,-3,8,0"
                                   Content="Title" />
                            <TextBox x:Name="CurrentPlaylistTitleTextBox"
                                     Grid.Row="1"
                                     Grid.Column="1"
                                     Height="22"
                                     Margin="0,0,0,8"
                                     IsEnabled="{Binding HasCurrentPlaylist, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     IsReadOnly="{Binding HasNoCurrentPlaylist, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                     MouseDoubleClick="SelectTextboxContents"
                                     GotKeyboardFocus="SelectTextboxContents"
                                     PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                     Text="{Binding CurrentPlaylist.Title, Mode=TwoWay}" />
                            <Label Grid.Column="0"
                                   Grid.Row="2"
                                   Margin="0,-3,8,0"
                                   Content="Description" />
                            <TextBox x:Name="CurrentPlaylistDescriptionTextBox"
                                     Grid.Column="1"
                                     Grid.Row="2"
                                     Height="22"
                                     Margin="0,0,0,8"
                                     IsEnabled="{Binding HasCurrentPlaylist, Mode=OneWay}"
                                     IsReadOnly="{Binding HasNoCurrentPlaylist, Mode=OneWay}"
                                     MouseDoubleClick="SelectTextboxContents"
                                     GotKeyboardFocus="SelectTextboxContents"
                                     PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"
                                     Text="{Binding CurrentPlaylist.Description, Mode=TwoWay}" />
                            <Label Grid.Column="0"
                                   Grid.Row="3"
                                   Margin="0,-3,8,0"
                                   Content="Default Book" />
                            <ComboBox x:Name="PlaylistDefaultBookComboBox"
                                      Grid.Column="1"
                                      Grid.Row="3"
                                      Margin="0,0,0,8"
                                      Height="24"
                                      Width="180"
                                      HorizontalAlignment="Left"
                                      SelectedValue="{Binding CurrentPlaylist.DefaultBook, Mode=TwoWay}"
                                      ItemsSource="{Binding Prayerbooks, Mode=OneWay}"
                                      SelectedValuePath="Code"
                                      SelectionChanged="PlaylistDefaultBookComboBox_SelectionChanged"/>
                            <GroupBox Header="Playback Defaults"
                                      Grid.Row="4"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="2"
                                      Height="Auto">
                                <Grid x:Name="PlaylistPlaybackDefaultsGrid"
                                      Margin="4 4 4 4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="85" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="20" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="85" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="8" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Label Content="Pitch:"
                                           Grid.Row="0"
                                           Grid.Column="0" />
                                    <TextBlock x:Name="PlaylistDefaultPitchFormattedTextBlock"
                                               Grid.Row="0"
                                               Grid.Column="1"
                                               VerticalAlignment="Center"
                                               Text="{Binding CurrentPlaylist.DefaultPitchDescription, Mode=OneWay}" />
                                    <Label Content="Lower"
                                           HorizontalAlignment="Right"
                                           Grid.Row="0"
                                           Grid.Column="2" />
                                    <Slider x:Name="PlaylistDefaultPitchSlider"
                                            Grid.Row="0"
                                            Grid.Column="3"
                                            Value="{Binding CurrentPlaylist.PitchDefault}"
                                            Orientation="Horizontal"
                                            HorizontalAlignment="Stretch"
                                            IsSnapToTickEnabled="True"
                                            Maximum="{Binding PitchCeiling,Mode=OneWay}"
                                            Minimum="{Binding PitchFloor,Mode=OneWay}"
                                            TickFrequency="1"
                                            TickPlacement="Both" />
                                    <Label Content="Higher"
                                           Grid.Row="0"
                                           Grid.Column="4" />
                                    <Button x:Name="PlaylistDefaultPitchResetButton"
                                            Grid.Row="0"
                                            Grid.Column="5"
                                            Height="24"
                                            Width="24"
                                            BorderBrush="Transparent"
                                            Background="Transparent"
                                            ToolTip="Reset to default"
                                            Command="{Binding ResetPlaylistDefaultPitchCommand}">
                                        <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                    </Button>
                                    <Label Content="Pan:"
                                           Grid.Row="0"
                                           Grid.Column="7" />
                                    <TextBlock x:Name="PlaylistDefaultPanFormattedTextBlock"
                                               Grid.Row="0"
                                               Grid.Column="8"
                                               VerticalAlignment="Center"
                                               Text="{Binding CurrentPlaylist.DefaultPanDescription, Mode=OneWay}" />
                                    <Label Content="Voice"
                                           HorizontalAlignment="Right"
                                           Grid.Row="0"
                                           Grid.Column="9" />
                                    <Slider x:Name="PlaylistDefaultPanSlider"
                                            Grid.Row="0"
                                            Grid.Column="10"
                                            Value="{Binding CurrentPlaylist.PanDefault}"
                                            Orientation="Horizontal"
                                            HorizontalAlignment="Stretch"
                                            IsSnapToTickEnabled="False"
                                            Maximum="{Binding PanCeiling,Mode=OneWay}"
                                            Minimum="{Binding PanFloor,Mode=OneWay}"
                                            TickFrequency="0.2"
                                            TickPlacement="Both" />
                                    <Label Content="Guitar"
                                           Grid.Row="0"
                                           Grid.Column="11" />
                                    <Button x:Name="PlaylistDefaultPanResetButton"
                                            Grid.Row="0"
                                            Grid.Column="12"
                                            Height="24"
                                            Width="24"
                                            BorderBrush="Transparent"
                                            Background="Transparent"
                                            ToolTip="Reset to default"
                                            Command="{Binding ResetPlaylistDefaultPanCommand}">
                                        <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                    </Button>
                                    <Label Content="Tempo %:"
                                           Grid.Row="2"
                                           Grid.Column="0" />
                                    <TextBlock x:Name="PlaylistDefaultTempoFormattedTextBlock"
                                               Grid.Row="2"
                                               Grid.Column="1"
                                               VerticalAlignment="Center"
                                               Text="{Binding CurrentPlaylist.DefaultTempoDescription, Mode=OneWay}" />
                                    <Label Content="Slower"
                                           HorizontalAlignment="Right"
                                           Grid.Row="2"
                                           Grid.Column="2" />
                                    <Slider x:Name="PlaylistDefaultTempoSlider"
                                            Grid.Row="2"
                                            Grid.Column="3"
                                            Value="{Binding CurrentPlaylist.TempoDefault}"
                                            Orientation="Horizontal"
                                            HorizontalAlignment="Stretch"
                                            IsSnapToTickEnabled="False"
                                            SmallChange="1"
                                            Maximum="{Binding TempoCeiling,Mode=OneWay}"
                                            Minimum="{Binding TempoFloor,Mode=OneWay}"
                                            TickFrequency="10"
                                            TickPlacement="Both" />
                                    <Label Content="Faster"
                                           Grid.Row="2"
                                           Grid.Column="4" />
                                    <Button x:Name="PlaylistDefaultTempoResetButton"
                                            Grid.Row="2"
                                            Grid.Column="5"
                                            Height="24"
                                            Width="24"
                                            BorderBrush="Transparent"
                                            Background="Transparent"
                                            ToolTip="Reset to default (100%)"
                                            Command="{Binding ResetPlaylistDefaultTempoCommand}">
                                        <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                    </Button>
                                    <Label Content="Volume %:"
                                           Grid.Row="2"
                                           Grid.Column="7" />
                                    <TextBlock x:Name="PlaylistDefaultVolumeFormattedTextBlock"
                                               Grid.Row="2"
                                               Grid.Column="8"
                                               VerticalAlignment="Center"
                                               Text="{Binding CurrentPlaylist.DefaultVolumeDescription, Mode=OneWay}" />
                                    <Label Content="Mute"
                                           HorizontalAlignment="Right"
                                           Grid.Row="2"
                                           Grid.Column="9" />
                                    <Slider x:Name="PlaylistDefaultVolumeSlider"
                                            Grid.Row="2"
                                            Grid.Column="10"
                                            Value="{Binding CurrentPlaylist.VolumeDefault}"
                                            Orientation="Horizontal"
                                            HorizontalAlignment="Stretch"
                                            IsSnapToTickEnabled="False"
                                            Maximum="{Binding VolumeCeiling,Mode=OneWay}"
                                            Minimum="{Binding VolumeFloor,Mode=OneWay}"
                                            TickFrequency="10"
                                            TickPlacement="Both" />
                                    <Label Content="Full"
                                           Grid.Row="2"
                                           Grid.Column="11" />
                                    <Button x:Name="PlaylistDefaultVolumeResetButton"
                                            Grid.Row="2"
                                            Grid.Column="12"
                                            Height="24"
                                            Width="24"
                                            BorderBrush="Transparent"
                                            Background="Transparent"
                                            ToolTip="Reset to default (100%)"
                                            Command="{Binding ResetPlaylistDefaultVolumeCommand}">
                                        <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                    </Button>
                                </Grid>
                            </GroupBox>
                        </Grid>
                        <GroupBox Header="Tracks"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Margin="0 0 8 4">
                            <DockPanel x:Name="ScrollingPlaylistTrackPanel"
                                       Margin="0"
                                       Background="{StaticResource DarkBackgroundBrush}">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <ItemsControl x:Name="PlaylistTracks"
                                                  Background="{StaticResource DarkBackgroundBrush}"
                                                  Margin="8"
                                                  ItemsSource="{Binding CurrentPlaylist.Tracks, Mode=TwoWay}"
                                                  local:DragDropHelper.IsDragSource="true"
                                                  local:DragDropHelper.IsDropTarget="true"
                                                  local:DragDropHelper.DragDropTemplate="{StaticResource PlaylistTrackDataTemplateDrag}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="{StaticResource DarkBackgroundBrush}"
                                                        BorderBrush="Transparent"
                                                        BorderThickness="1"
                                                        Margin="0"
                                                        Padding="0 3 0 3">
                                                    <Border Background="{Binding Previewing, Converter={StaticResource PlayingBackgroundConverter}}"
                                                            BorderBrush="{Binding Previewing, Converter={StaticResource PlayingForegroundConverter}}"
                                                            BorderThickness="1"
                                                            CornerRadius="3"
                                                            Margin="0">
                                                        <DockPanel>
                                                            <DockPanel DockPanel.Dock="Left"
                                                                       HorizontalAlignment="Left">
                                                                <CheckBox x:Name="PlaylistTrackSelectionCheckBox"
                                                                          IsChecked="{Binding Selected}"
                                                                          Margin="5 6 5 0"
                                                                          Click="PlaylistTrackSelectionCheckBox_Click" />
                                                                <Label Content="{Binding Title}"
                                                                       FontWeight="{Binding Selected, Converter={StaticResource BoldConverter}}"
                                                                       Foreground="{StaticResource BrightForegroundBrush}"
                                                                       Margin="0 0 0 0" />
                                                                <Label Content="{Binding PunctuatedRendition}"
                                                                       Foreground="{StaticResource BrightForegroundBrush}" />
                                                            </DockPanel>
                                                            <DockPanel DockPanel.Dock="Right"
                                                                       HorizontalAlignment="Right">
                                                                <Label Content="Page: "
                                                                       Margin="8 0 -4 0" />
                                                                <Label Content="{Binding ShownPages, Mode=OneWay}"
                                                                       Margin="0 0 8 0" />
                                                                <Label Content="["
                                                                       Padding="10 4 0 4" />
                                                                <Label Content="{Binding FormattedLength}"
                                                                       FontWeight="Normal" />
                                                                <Label Content="]"
                                                                       Padding="0 4 0 4" />
                                                                <Image Source="/Resources/Track-Tweaks-Icon-40x40.png"
                                                                       Height="20"
                                                                       Margin="16 0 0 0"
                                                                       ToolTip="Playback adjustments in effect"
                                                                       Visibility="{Binding TrackTweaksVisibility}" />
                                                                <Button Click="EditPlaylistTrackButton_Click"
                                                                        Style="{DynamicResource NoChromeButton}"
                                                                        Margin="8 0 10 0"
                                                                        Height="20">
                                                                    <Image Source="Resources/edit_40x40.png" />
                                                                    <Button.ToolTip>
                                                                        <StackPanel Orientation="Vertical">
                                                                            <TextBlock FontWeight="Bold"><Run Text="Edit" /></TextBlock>
                                                                            <TextBlock><Run Text="Edit the playback settings for this track." /></TextBlock>
                                                                        </StackPanel>
                                                                    </Button.ToolTip>
                                                                </Button>
                                                                <Button x:Name="PlaylistTrackPreviewButton"
                                                                        Click="PreviewButton_Click"
                                                                        Style="{DynamicResource NoChromeButton}"
                                                                        Margin="0 0 10 0"
                                                                        Height="20">
                                                                    <Image Source="Resources/preview.png" />
                                                                    <Button.ToolTip>
                                                                        <StackPanel Orientation="Vertical">
                                                                            <TextBlock FontWeight="Bold"><Run Text="Preview" /></TextBlock>
                                                                            <TextBlock><Run Text="Click to hear this track. Click again to stop the preview." /></TextBlock>
                                                                        </StackPanel>
                                                                    </Button.ToolTip>
                                                                </Button>
                                                            </DockPanel>
                                                        </DockPanel>
                                                    </Border>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </DockPanel>



                        </GroupBox>
                    </Grid>
                    <Grid x:Name="PlaylistTrackPropertiesContainerGrid"
                          Panel.ZIndex="2"
                          Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Canvas x:Name="PlaylistTrackOverlayPanel"
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Background="{StaticResource SemiTransparentBackgroundBrush}" />
                        <GroupBox Header="Track Settings"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Height="Auto"
                                  Margin="0,0,8,4"
                                  Panel.ZIndex="4">
                            <Grid x:Name="PlaylistTrackPropertiesOverlayGrid"
                                  Grid.Column="1"
                                  Grid.Row="0"
                                  Margin="4,4,4,4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Label Grid.Column="0"
                                       Grid.Row="0"
                                       Content="Title"
                                       Margin="0 0 8 0" 
                                       VerticalAlignment="Center"/>
                                <TextBlock Grid.Row="0"
                                           Grid.Column="1"
                                           Margin="0 0 0 0"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Left"
                                           Text="{Binding CurrentPlaylistTrack.Title, Mode=OneWay}" />
                                <Label Grid.Column="0"
                                       Grid.Row="1"
                                       Content="Rendition"
                                       Margin="0 0 8 0"
                                       VerticalAlignment="Center"/>
                                <TextBlock Grid.Row="1"
                                           Grid.Column="1"
                                           Margin="0 0 0 0"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Left"
                                           Text="{Binding CurrentPlaylistTrack.Rendition, Mode=OneWay}" />
                                <Label Grid.Column="0"
                                       Grid.Row="2"
                                       Content="Page"
                                       VerticalAlignment="Center"
                                       Margin="0 0 8 0" />
                                <StackPanel Orientation="Horizontal"
                                            Grid.Row="2"
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center">
                                    <TextBlock Margin="0 0 8 0"
                                               Text="{Binding CurrentPlaylistTrack.ShownPages, Mode=OneWay}" />
                                    <TextBlock Margin="0 0 0 0"
                                               Foreground="{StaticResource LightForegroundBrush}"
                                               Text="{Binding CurrentPlaylistTrack.ParentheticalBookForDisplay, Mode=OneWay}" />
                                </StackPanel>
                                <GroupBox x:Name="PlaylistTrackPlaybackSettingsGroupBox"
                                          Header="Playback Settings"
                                          Grid.Row="3"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="2"
                                          MinWidth="550"
                                          Margin="0 4 0 0">
                                    <Grid x:Name="PlaylistTrackPlaybackSettingsGrid"
                                          Margin="0 4 0 4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="85" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="8" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="8" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="8" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Label Content="Pitch:"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0 0 8 0"
                                               VerticalAlignment="Center" />
                                        <TextBlock x:Name="PlaylistTrackPitchFormattedTextBlock"
                                                   Grid.Row="0"
                                                   Grid.Column="1"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding CurrentPlaylistTrack.EffectivePitchDescription, Mode=OneWay}" />
                                        <CheckBox Grid.Row="0"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  Margin="0, 2, 0, 0"
                                                  Content="Override"
                                                  IsChecked="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=TwoWay}" />
                                        <Label Content="Lower"
                                               HorizontalAlignment="Right"
                                               Grid.Row="0"
                                               Grid.Column="3"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Slider x:Name="PlaylistTrackPitchSlider"
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                Value="{Binding CurrentPlaylistTrack.EffectivePitch, Mode=TwoWay}"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=OneWay}"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Stretch"
                                                IsSnapToTickEnabled="True"
                                                Maximum="{Binding PitchCeiling,Mode=OneWay}"
                                                Minimum="{Binding PitchFloor,Mode=OneWay}"
                                                TickFrequency="1"
                                                TickPlacement="Both" />
                                        <Label Content="Higher"
                                               Grid.Row="0"
                                               Grid.Column="5"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Button x:Name="PlaylistOverridePitchResetButton"
                                                Grid.Row="0"
                                                Grid.Column="6"
                                                Height="24"
                                                Width="24"
                                                BorderBrush="Transparent"
                                                Background="Transparent"
                                                ToolTip="Reset to default"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=OneWay}"
                                                Command="{Binding ResetPlaylistOverridePitchCommand}">
                                            <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                        </Button>
                                        <Label Content="Tempo %:"
                                               Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0 0 8 0"
                                               VerticalAlignment="Center" />
                                        <TextBlock x:Name="PlaylistTrackTempoFormattedTextBlock"
                                                   Grid.Row="2"
                                                   Grid.Column="1"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding CurrentPlaylistTrack.EffectiveTempoDescription, Mode=OneWay}" />
                                        <CheckBox Grid.Row="2"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  Margin="0, 2, 0, 0"
                                                  Content="Override"
                                                  IsChecked="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=TwoWay}" />
                                        <Label Content="Slower"
                                               HorizontalAlignment="Right"
                                               Grid.Row="2"
                                               Grid.Column="3"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Slider x:Name="PlaylistTrackTempoSlider"
                                                Grid.Row="2"
                                                Grid.Column="4"
                                                Value="{Binding CurrentPlaylistTrack.EffectiveTempo, Mode=TwoWay}"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=OneWay}"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Stretch"
                                                IsSnapToTickEnabled="False"
                                                SmallChange="1"
                                                Maximum="{Binding TempoCeiling,Mode=OneWay}"
                                                Minimum="{Binding TempoFloor,Mode=OneWay}"
                                                TickFrequency="10"
                                                TickPlacement="Both" />
                                        <Label Content="Faster"
                                               Grid.Row="2"
                                               Grid.Column="5"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Button x:Name="PlaylistOverrideTempoResetButton"
                                                Grid.Row="2"
                                                Grid.Column="6"
                                                Height="24"
                                                Width="24"
                                                BorderBrush="Transparent"
                                                Background="Transparent"
                                                ToolTip="Reset to default"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=OneWay}"
                                                Command="{Binding ResetPlaylistOverrideTempoCommand}">
                                            <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                        </Button>
                                        <Label Content="Pan:"
                                               Grid.Row="4"
                                               Grid.Column="0"
                                               Margin="0 0 8 0"
                                               VerticalAlignment="Center" />
                                        <TextBlock x:Name="PlaylistTrackPanFormattedTextBlock"
                                                   Grid.Row="4"
                                                   Grid.Column="1"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding CurrentPlaylistTrack.EffectivePanDescription, Mode=OneWay}" />
                                        <CheckBox Grid.Row="4"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  Margin="0, 2, 0, 0"
                                                  Content="Override"
                                                  IsChecked="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=TwoWay}" />
                                        <Label Content="Voice"
                                               HorizontalAlignment="Right"
                                               Grid.Row="4"
                                               Grid.Column="3"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Slider x:Name="PlaylistTrackPanSlider"
                                                Grid.Row="4"
                                                Grid.Column="4"
                                                Value="{Binding CurrentPlaylistTrack.EffectivePan, Mode=TwoWay}"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=OneWay}"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Stretch"
                                                IsSnapToTickEnabled="False"
                                                Maximum="{Binding PanCeiling,Mode=OneWay}"
                                                Minimum="{Binding PanFloor,Mode=OneWay}"
                                                TickFrequency="0.2"
                                                TickPlacement="Both" />
                                        <Label Content="Guitar"
                                               Grid.Row="4"
                                               Grid.Column="5"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Button x:Name="PlaylistOverridePanResetButton"
                                                Grid.Row="4"
                                                Grid.Column="6"
                                                Height="24"
                                                Width="24"
                                                BorderBrush="Transparent"
                                                Background="Transparent"
                                                ToolTip="Reset to default"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=OneWay}"
                                                Command="{Binding ResetPlaylistOverridePanCommand}">
                                            <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                        </Button>
                                        <Label Content="Volume %:"
                                               Grid.Row="6"
                                               Grid.Column="0"
                                               Margin="0 0 8 0"
                                               VerticalAlignment="Center" />
                                        <TextBlock x:Name="PlaylistTrackVolumeFormattedTextBlock"
                                                   Grid.Row="6"
                                                   Grid.Column="1"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding CurrentPlaylistTrack.EffectiveVolumeDescription, Mode=OneWay}" />
                                        <CheckBox Grid.Row="6"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  Margin="0, 2, 0, 0"
                                                  Content="Override"
                                                  IsChecked="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=TwoWay}" />
                                        <Label Content="Mute"
                                               HorizontalAlignment="Right"
                                               Grid.Row="6"
                                               Grid.Column="3"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Slider x:Name="PlaylistTrackVolumeSlider"
                                                Grid.Row="6"
                                                Grid.Column="4"
                                                Value="{Binding CurrentPlaylistTrack.EffectiveVolume, Mode=TwoWay}"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=OneWay}"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Stretch"
                                                IsSnapToTickEnabled="False"
                                                Maximum="{Binding VolumeCeiling,Mode=OneWay}"
                                                Minimum="{Binding VolumeFloor,Mode=OneWay}"
                                                TickFrequency="10"
                                                TickPlacement="Both" />
                                        <Label Content="Full"
                                               Grid.Row="6"
                                               Grid.Column="5"
                                               Margin="0 0 0 0"
                                               VerticalAlignment="Center" />
                                        <Button x:Name="PlaylistOverrideVolumeResetButton"
                                                Grid.Row="6"
                                                Grid.Column="6"
                                                Height="24"
                                                Width="24"
                                                BorderBrush="Transparent"
                                                Background="Transparent"
                                                ToolTip="Reset to default"
                                                IsEnabled="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=OneWay}"
                                                Command="{Binding ResetPlaylistOverrideVolumeCommand}">
                                            <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                                        </Button>
                                    </Grid>
                                </GroupBox>
                                <DockPanel Grid.Row="4"
                                           Grid.Column="0"
                                           Grid.ColumnSpan="2"
                                           DockPanel.Dock="Left"
                                           HorizontalAlignment="Left"
                                           Margin="0 10 0 0">
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="PlaylistTrackPlayButton"
                                                Width="50"
                                                Height="28"
                                                Margin="2 0 -4 0"
                                                IsEnabled="{Binding CurrentPlaylistTrack.CanPlay, Mode=OneWay}"
                                                Command="{Binding CurrentPlaylistTrack.PlayCurrentTrackCommand}"
                                                >Play</Button>
                                        <Button x:Name="PlaylistTrackStopButton"
                                                Width="50"
                                                Height="28"
                                                Margin="8 0 -4 0"
                                                IsEnabled="{Binding CurrentPlaylistTrack.CanStop, Mode=OneWay}"
                                                Command="{Binding CurrentPlaylistTrack.StopCurrentTrackCommand}">Stop</Button>
                                    </StackPanel>
                                </DockPanel>
                                <DockPanel Grid.Row="4"
                                               Grid.Column="0"
                                               Grid.ColumnSpan="2"
                                               DockPanel.Dock="Right"
                                            HorizontalAlignment="Right"
                                            Margin="0 10 0 0">
                                    <Button x:Name="PlaylistTrackPropertiesDialogCloseButton"
                                            Width="50"
                                            Height="28"
                                            Margin="0 0 2 0"
                                            Click="PlaylistTrackPropertiesDialogCloseButton_Click">Close</Button>
                                </DockPanel>
                            </Grid>
                        </GroupBox>
                    </Grid>
                    <Grid x:Name="PlaylistTrackConfirmationContainerGrid"
                          Panel.ZIndex="2"
                          Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Canvas x:Name="PlaylistTrackConfirmationOverlayPanel"
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Background="{StaticResource SemiTransparentBackgroundBrush}" />
                        <GroupBox Header="Confirm Action"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Height="Auto"
                                  Margin="0,0,8,4"
                                  Panel.ZIndex="4">
                            <Grid x:Name="PlaylistTrackConfirmationLayoutGrid"
                                  Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Image Source="/Resources/Warning-80x80.png"
                                       Grid.Row="0"
                                       Grid.Column="0"
                                       Height="50"
                                       Width="50"
                                       Margin="0 0 20 0"
                                       VerticalAlignment="Top" />
                                <StackPanel Orientation="Vertical"
                                            Grid.Column="1"
                                            Grid.Row="0">
                                    <TextBlock FontWeight="Bold"
                                               FontSize="15"
                                               Text="Confirm Removal" />
                                    <TextBlock x:Name="PlaylistTrackConfirmDeleteMessageTextBlock"
                                               Text="{Binding PlaylistTrackConfirmDeleteMessage, Mode=OneWay}" />
                                    <TextBlock x:Name="PlaylistTrackConfirmDeleteDetailsTextBlock"
                                               Text="{Binding PlaylistTrackConfirmDeleteList, Mode=OneWay}" />
                                    <DockPanel DockPanel.Dock="Right"
                                               HorizontalAlignment="Right"
                                               Margin="0 10 0 0">
                                        <StackPanel Orientation="Horizontal">
                                            <Button x:Name="CancelPlaylistTrackDeleteButton"
                                                    Content="Cancel"
                                                    Height="30"
                                                    Width="60"
                                                    Click="CancelPlaylistTrackDeleteButton_Click" />
                                            <Button x:Name="ConfirmPlaylistTrackDeleteButton"
                                                    Content="Delete"
                                                    Height="30"
                                                    Width="60"
                                                    Margin="10 0 0 0"
                                                    Click="ConfirmPlaylistTrackDeleteButton_Click" />
                                        </StackPanel>
                                    </DockPanel>
                                </StackPanel>
                            </Grid>
                        </GroupBox>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem x:Name="PlaybackTabItem"
                     Header="Playback">
                <Grid x:Name="PlaybackTabContainerGrid"
                      Margin="4 4 4 4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Horizontal"
                                Grid.Row="0"
                                Grid.Column="0"
                                HorizontalAlignment="Left">
                        <Label Content="Playlist:" 
                               VerticalAlignment="Center"/>
                        <TextBlock x:Name="PlaybackLoadedPlaylistDescription"
                                   Margin="8 0 0 0"
                                   VerticalAlignment="Center"
                                   Text="{Binding CurrentPlaylistPlaybackTabDescription, Mode=OneWay}"
                                   TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                    <Grid x:Name="PlaybackCurrentTrackGrid"
                          Grid.Row="1"
                          Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Border x:Name="CurrentTrackBorder"
                                Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="4 4 0 4"
                                Background="{Binding CurrentTrackBorderBackground, Mode=OneWay}"
                                BorderBrush="{Binding CurrentTrackBorderBrush, Mode=OneWay}"
                                BorderThickness="1">
                            <Grid x:Name="NowPlayingLayoutGrid">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="40" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Label x:Name="CurrentTrackStatusLabel"
                                       Grid.Column="0"
                                       Grid.Row="0"
                                       Grid.RowSpan="2"
                                       Margin="0,0,0,0"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Content="{Binding CurrentTrackStatusLabel, Mode=OneWay}"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       Foreground="{Binding CurrentTrackStatusColour, Mode=OneWay}" />
                                <TextBlock Name="CurrentTrackDescriptionLabel"
                                           Foreground="{StaticResource BrightForegroundBrush}"
                                           Grid.Row="0"
                                           Grid.Column="1"
                                           Margin="0,0,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Bottom"
                                           FontSize="20"
                                           FontWeight="Bold"
                                           Text="{Binding CurrentTrackPlaybackDescription, Mode=OneWay}"
                                           TextTrimming="CharacterEllipsis" />
                                <Label Name="CurrentTrackDescriptionDetailsLabel"
                                       Grid.Row="1"
                                       Grid.Column="1"
                                       Margin="0,0,0,0"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Top"
                                       VerticalContentAlignment="Top"
                                       Content="{Binding CurrentTrackPlaybackDescriptionDetails, Mode=OneWay}"
                                       FontFamily="Segoe"
                                       FontSize="13"
                                       Foreground="{StaticResource BrightForegroundBrush}" />
                            </Grid>
                        </Border>
                        <Grid x:Name="NowPlayingTranportButtonsGrid"
                              Grid.Row="0"
                              Grid.RowSpan="2"
                              Grid.Column="2">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="36" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100" />
                                <ColumnDefinition Width="100" />
                            </Grid.ColumnDefinitions>
                            <!-- FILL IN THE COMMAND HERE -->
                            <Button x:Name="PlaybackPlayButton"
                                    Grid.Column="0"
                                    Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Margin="8,0,0,0"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Content="PLAY"
                                    FontFamily="Segue"
                                    FontSize="22"
                                    FontWeight="Bold"
                                    Foreground="{Binding PlaybackPlayButtonForeground, Mode=OneWay}"
                                    Background="{Binding PlaybackPlayButtonBackground, Mode=OneWay}"
                                    IsEnabled="{Binding CanPlay, Mode=OneWay}"
                                    Style="{StaticResource RunButtonStyle}"
                                    Command="{Binding CurrentPlaylistTrack.PlayCurrentTrackCommand}"/>
                            <!-- FILL IN THE COMMAND HERE -->
                            <Button x:Name="PlaybackPauseButton"
                                    Grid.Column="1"
                                    Grid.Row="0"
                                    Margin="8,0,0,4"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Content="PAUSE"
                                    FontFamily="Segue"
                                    FontSize="20"
                                    FontWeight="Bold"
                                    Foreground="{Binding PlaybackPauseButtonForeground, Mode=OneWay}"
                                    Background="{Binding PlaybackPauseButtonBackground, Mode=OneWay}"
                                    IsEnabled="{Binding CanPause, Mode=OneWay}"
                                    Style="{StaticResource RunButtonStyle}"
                                    Command="{Binding CurrentPlaylistTrack.PauseCurrentTrackCommand}"/>
                            <!-- FILL IN THE COMMAND HERE -->
                            <Button x:Name="PlaybackStopButton"
                                    Grid.Column="1"
                                    Grid.Row="1"
                                    Margin="8,4,0,0"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Content="STOP"
                                    FontFamily="Segue"
                                    FontSize="22"
                                    FontWeight="Bold"
                                    Foreground="{Binding PlaybackStopButtonForeground, Mode=OneWay}"
                                    Background="{Binding PlaybackStopButtonBackground, Mode=OneWay}"
                                    IsEnabled="{Binding CanStop, Mode=OneWay}"
                                    Style="{StaticResource RunButtonStyle}"
                                    Command="{Binding CurrentPlaylistTrack.StopCurrentTrackCommand}"/>
                        </Grid>
                    </Grid>
                    <Grid Grid.Row="2"
                          Grid.Column="0"
                          Margin="0 4 0 4">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Label Content="Progress"
                               Grid.Row="0"
                               Grid.Column="0"
                               VerticalAlignment="Center"/>
                        <TextBlock x:Name="PlaybackProgressSoFar"
                                   Grid.Row="0"
                                   Grid.Column="1"
                                   TextAlignment="Right"
                                   VerticalAlignment="Center"
                                   Margin="0 0 8 0"
                                   Text="{Binding CurrentTrackPositionFormatted, Mode=OneWay}" />
                        <Slider x:Name="PlaybackProgressSlider"
                                Grid.Row="0"
                                Grid.Column="2"
                                Value="{Binding CurrentTrackProgressSliderValue, Mode=TwoWay}"
                                IsEnabled="{Binding CurrentTrackPlaybackCanScrub, Mode=OneWay}"
                                Orientation="Horizontal"
                                HorizontalAlignment="Stretch"
                                IsSnapToTickEnabled="False"
                                Maximum="1000"
                                Minimum="0"
                                TickFrequency="100"
                                TickPlacement="None" />
                        <TextBlock x:Name="PlaybackProgressToGo"
                                   Grid.Row="0"
                                   Grid.Column="3"
                                   TextAlignment="Left"
                                   VerticalAlignment="Center"
                                   Margin="8 0 8 0"
                                   Text="{Binding CurrentTrackRemainingFormatted, Mode=OneWay}" />
                    </Grid>
                    <GroupBox Header="Playback Settings"
                              Grid.Row="3"
                              Grid.Column="0">
                        <Grid x:Name="PlaybackSettingsGrid"
                              Margin="0 4 0 4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="85" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="8" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="8" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="8" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Label Content="Pitch:"
                                   Grid.Row="0"
                                   Grid.Column="0"
                                   Margin="0 0 8 0"
                                   VerticalAlignment="Center" />
                            <TextBlock x:Name="PlaybackPitchFormattedTextBlock"
                                       Grid.Row="0"
                                       Grid.Column="1"
                                       VerticalAlignment="Center"
                                       Text="{Binding CurrentPlaylistTrack.EffectivePitchDescription, Mode=OneWay}" />
                            <CheckBox Grid.Row="0"
                                      Grid.Column="2"
                                      VerticalAlignment="Center"
                                      Margin="8, 2, 0, 0"
                                      Content="Override"
                                      IsChecked="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=TwoWay}" />
                            <Label Content="Lower"
                                   HorizontalAlignment="Right"
                                   Grid.Row="0"
                                   Grid.Column="3"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Slider x:Name="PlaybackPitchSlider"
                                    Grid.Row="0"
                                    Grid.Column="4"
                                    Value="{Binding CurrentPlaylistTrack.EffectivePitch, Mode=TwoWay}"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=OneWay}"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Stretch"
                                    IsSnapToTickEnabled="True"
                                    Maximum="{Binding PitchCeiling,Mode=OneWay}"
                                    Minimum="{Binding PitchFloor,Mode=OneWay}"
                                    TickFrequency="1"
                                    TickPlacement="Both" />
                            <Label Content="Higher"
                                   Grid.Row="0"
                                   Grid.Column="5"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Button x:Name="PlaybackOverridePitchResetButton"
                                    Grid.Row="0"
                                    Grid.Column="6"
                                    Height="24"
                                    Width="24"
                                    BorderBrush="Transparent"
                                    Background="Transparent"
                                    ToolTip="Reset to default"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UsePitchOverride, Mode=OneWay}"
                                    Command="{Binding ResetPlaylistOverridePitchCommand}">
                                <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                            </Button>
                            <Label Content="Tempo %:"
                                   Grid.Row="2"
                                   Grid.Column="0"
                                   Margin="0 0 8 0"
                                   VerticalAlignment="Center" />
                            <TextBlock x:Name="PlaybackTempoFormattedTextBlock"
                                       Grid.Row="2"
                                       Grid.Column="1"
                                       VerticalAlignment="Center"
                                       Text="{Binding CurrentPlaylistTrack.EffectiveTempoDescription, Mode=OneWay}" />
                            <CheckBox Grid.Row="2"
                                      Grid.Column="2"
                                      VerticalAlignment="Center"
                                      Margin="8, 2, 0, 0"
                                      Content="Override"
                                      IsChecked="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=TwoWay}" />
                            <Label Content="Slower"
                                   HorizontalAlignment="Right"
                                   Grid.Row="2"
                                   Grid.Column="3"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Slider x:Name="PlaybackTempoSlider"
                                    Grid.Row="2"
                                    Grid.Column="4"
                                    Value="{Binding CurrentPlaylistTrack.EffectiveTempo, Mode=TwoWay}"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=OneWay}"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Stretch"
                                    IsSnapToTickEnabled="False"
                                    SmallChange="1"
                                    Maximum="{Binding TempoCeiling,Mode=OneWay}"
                                    Minimum="{Binding TempoFloor,Mode=OneWay}"
                                    TickFrequency="10"
                                    TickPlacement="Both" />
                            <Label Content="Faster"
                                   Grid.Row="2"
                                   Grid.Column="5"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Button x:Name="PlaybackOverrideTempoResetButton"
                                    Grid.Row="2"
                                    Grid.Column="6"
                                    Height="24"
                                    Width="24"
                                    BorderBrush="Transparent"
                                    Background="Transparent"
                                    ToolTip="Reset to default"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UseTempoOverride, Mode=OneWay}"
                                    Command="{Binding ResetPlaylistOverrideTempoCommand}">
                                <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                            </Button>
                            <Label Content="Pan:"
                                   Grid.Row="4"
                                   Grid.Column="0"
                                   Margin="0 0 8 0"
                                   VerticalAlignment="Center" />
                            <TextBlock x:Name="PlaybackPanFormattedTextBlock"
                                       Grid.Row="4"
                                       Grid.Column="1"
                                       VerticalAlignment="Center"
                                       Text="{Binding CurrentPlaylistTrack.EffectivePanDescription}" />
                            <CheckBox Grid.Row="4"
                                      Grid.Column="2"
                                      VerticalAlignment="Center"
                                      Margin="8, 2, 0, 0"
                                      Content="Override"
                                      IsChecked="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=TwoWay}" />
                            <Label Content="Voice"
                                   HorizontalAlignment="Right"
                                   Grid.Row="4"
                                   Grid.Column="3"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Slider x:Name="PlaybackPanSlider"
                                    Grid.Row="4"
                                    Grid.Column="4"
                                    Value="{Binding CurrentPlaylistTrack.EffectivePan, Mode=TwoWay}"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=OneWay}"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Stretch"
                                    IsSnapToTickEnabled="False"
                                    Maximum="{Binding PanCeiling,Mode=OneWay}"
                                    Minimum="{Binding PanFloor,Mode=OneWay}"
                                    TickFrequency="0.2"
                                    TickPlacement="Both" />
                            <Label Content="Guitar"
                                   Grid.Row="4"
                                   Grid.Column="5"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Button x:Name="PlaybackOverridePanResetButton"
                                    Grid.Row="4"
                                    Grid.Column="6"
                                    Height="24"
                                    Width="24"
                                    BorderBrush="Transparent"
                                    Background="Transparent"
                                    ToolTip="Reset to default"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UsePanOverride, Mode=OneWay}"
                                    Command="{Binding ResetPlaylistOverridePanCommand}">
                                <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                            </Button>
                            <Label Content="Volume %:"
                                   Grid.Row="6"
                                   Grid.Column="0"
                                   Margin="0 0 8 0"
                                   VerticalAlignment="Center" />
                            <TextBlock x:Name="PlaybackVolumeFormattedTextBlock"
                                       Grid.Row="6"
                                       Grid.Column="1"
                                       VerticalAlignment="Center"
                                       Text="{Binding CurrentPlaylistTrack.EffectiveVolumeDescription, Mode=OneWay}" />
                            <CheckBox Grid.Row="6"
                                      Grid.Column="2"
                                      VerticalAlignment="Center"
                                      Margin="8, 2, 0, 0"
                                      Content="Override"
                                      IsChecked="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=TwoWay}" />
                            <Label Content="Mute"
                                   HorizontalAlignment="Right"
                                   Grid.Row="6"
                                   Grid.Column="3"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Slider x:Name="PlaybackTrackVolumeSlider"
                                    Grid.Row="6"
                                    Grid.Column="4"
                                    Value="{Binding CurrentPlaylistTrack.EffectiveVolume, Mode=TwoWay}"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=OneWay}"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Stretch"
                                    IsSnapToTickEnabled="False"
                                    Maximum="{Binding VolumeCeiling,Mode=OneWay}"
                                    Minimum="{Binding VolumeFloor,Mode=OneWay}"
                                    TickFrequency="10"
                                    TickPlacement="Both" />
                            <Label Content="Full"
                                   Grid.Row="6"
                                   Grid.Column="5"
                                   Margin="0 0 0 0"
                                   VerticalAlignment="Center" />
                            <Button x:Name="PlaybackOverrideVolumeResetButton"
                                    Grid.Row="6"
                                    Grid.Column="6"
                                    Height="24"
                                    Width="24"
                                    BorderBrush="Transparent"
                                    Background="Transparent"
                                    ToolTip="Reset to default"
                                    IsEnabled="{Binding CurrentPlaylistTrack.UseVolumeOverride, Mode=OneWay}"
                                    Command="{Binding ResetPlaylistOverrideVolumeCommand}">
                                <Image Source="/Resources/Reset-Button-Icon-40x40.png" />
                            </Button>
                        </Grid>
                    </GroupBox>
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Stretch"
                                Margin="0 4 0 4"
                                Grid.Row="4"
                                Grid.Column="0">
                        <Button x:Name="PlayListPrevious"
                                Margin="0,0,6,0"
                                IsEnabled="{Binding CanPreviousTrack, Mode=OneWay}"
                                Command="{Binding PreviousPlaybackTrackCommand}"
                                Height="38"
                                Width="90">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontFamily="Segoe MDL2 Assets Regular"
                                           FontSize="24"
                                           Margin="0,1,0,0"
                                           Text="">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=PlayListPrevious, Path=IsEnabled}"
                                                             Value="False">
                                                    <Setter Property="Foreground"
                                                            Value="{StaticResource Button.Disabled.Foreground}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <TextBlock FontFamily="Segoe"
                                           FontSize="12"
                                           Margin="5,2,0,0"
                                           VerticalAlignment="Center"
                                           Text="Previous">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=PlayListPrevious, Path=IsEnabled}"
                                                             Value="False">
                                                    <Setter Property="Foreground"
                                                            Value="{StaticResource Button.Disabled.Foreground}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </Button>
                        <TextBlock x:Name="PlaybackPreviousTrackDescription"
                                   Margin="8 0 0 0"
                                   FontSize="14"
                                   FontWeight="DemiBold"
                                   VerticalAlignment="Center"
                                   Text="{Binding PreviousTrackDescription, Mode=OneWay}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Stretch"
                                Margin="0 4 0 4"
                                Grid.Row="5"
                                Grid.Column="0">
                        <Button x:Name="PlayListNext"
                                Margin="0,0,6,0"
                                Command="{Binding NextPlaybackTrackCommand}"
                                IsEnabled="{Binding CanNextTrack,Mode=OneWay}"
                                Height="38"
                                Width="90">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontFamily="Segoe"
                                           FontSize="12"
                                           Margin="0,2,5,0"
                                           VerticalAlignment="Center"
                                           Text="Next">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=PlayListNext, Path=IsEnabled}"
                                                             Value="False">
                                                    <Setter Property="Foreground"
                                                            Value="{StaticResource Button.Disabled.Foreground}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <TextBlock FontFamily="Segoe MDL2 Assets Regular"
                                           FontSize="24"
                                           Margin="0,1,0,0"
                                           Text="">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=PlayListNext, Path=IsEnabled}"
                                                             Value="False">
                                                    <Setter Property="Foreground"
                                                            Value="{StaticResource Button.Disabled.Foreground}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </Button>
                        <TextBlock x:Name="PlaybackNextTrackDescription"
                                   Margin="8 0 0 0"
                                   FontSize="14"
                                   FontWeight="DemiBold"
                                   VerticalAlignment="Center"
                                   Text="{Binding NextTrackDescription, Mode=OneWay}" />
                    </StackPanel>
                    
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
